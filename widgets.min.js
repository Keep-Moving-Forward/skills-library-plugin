(function(){function n(){e=window.jQuery.noConflict(true);r(e)}function r(e){(function(e){e.fn.skillEngine=function(t){this.options=e.extend({apikey:this.data("apikey"),id:typeof this.data("skill-id")==="undefined"||this.data("skill-id")==""?0:this.data("skill-id"),getSkillJson:function(){}},t);e.fn.loadCss();e(this.selector).addClass("easy-tree");if(typeof t.data==="undefined"||t.data==""){}else{e(this).append(e.fn.buildTreeRecur(t.data))}e.fn.requestSkill(this);e.fn.skillRating();e(this).append('<div id="skill-top-count" class="" style="position:fixed; background-color:#444;top: 0px;height: 25px;">No Skills Selected above</div><div id="skill-bottom-count" style="position:fixed; background-color:#444;bottom: 0px;height: 25px; float:right;">No Skills Selected below</div>');t.getSkillJson.call(this,e.fn.skillJson());var n=this;return this.each(function(){var t=e(this);e(document).on("scroll",function(){var t=e("input[name='skills[]']:above-the-top:checked").each(function(e,t){return t});var n=e("input[name='skills[]']:below-the-fold:checked").each(function(e,t){return t});e("#skill-top-count").text("Skills selected @ top "+t.length);e("#skill-bottom-count").text("Skills selected @ bottom "+n.length)});e(t).on("click","ul li a",function(){var t=e(this).parent("li")[0].id;n.selector="li#"+t;n.options.id=t;e.fn.beautify(n);if(e(n.selector).attr("data-appended")=="false"&&(e(n.selector).attr("data-is_child")==1||e(n.selector).attr("data-is_child")==2)){e.fn.requestSkill(n)}})})};e.fn.loadCss=function(){e("<link>",{rel:"stylesheet",type:"text/css",href:"//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css"}).appendTo("head");e("<link>",{rel:"stylesheet",type:"text/css",href:"//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css"}).appendTo("head");e("<link>",{rel:"stylesheet",type:"text/css",href:"http://api.itsyourskills.com/css/widgets.css"}).appendTo("head");e("<link>",{rel:"stylesheet",type:"text/css",href:"http://antenna.io/demo/jquery-bar-rating/examples/css/examples.css"}).appendTo("head")};e.fn.beautify=function(t){var n=e(t.selector);var r=n.find("input:checked").each(function(){return true});if(r.length>0){e(t.selector+" > i").alterClass("fa-*","fa-check")}else{if(e(t.selector+" ul").children(":visible").length>1||e(t.selector+" ul").length==0){e(t.selector+" > i").alterClass("fa-*","fa-minus")}else{e(t.selector+" > i").alterClass("fa-*","fa-plus")}}if(n.children("ul").length<1){n.children("ul").show()}else{if(n.children("ul").is(":hidden")){n.children("ul").show()}else{if(n.attr("data-appended")=="true"){n.children("ul").hide()}else{e(t.selector+" i").addClass(" fa-spin")}}}};e.fn.requestSkill=function(t){e(t.selector).children("i").addClass("fa-spin");e.ajax({url:"https://iys.p.mashape.com/"+t.options.id,type:"GET",data:{},datatype:"json",success:function(n){e.fn.buildTree(t,n)},error:function(e){alert(e)},beforeSend:function(e){e.setRequestHeader("X-Mashape-Authorization",t.options.apikey)}});e(t.selector+" i").removeClass("fa-spin")};e.fn.buildTreeRecur=function(t,n){if(typeof n==="undefined"||n===null){n=0}$tree="<ul>";for(var r=0;r<t.length;r++){if(t[r]["parent_id"]==n){$tree+='<li id="'+t[r].id+'" data-value="'+t[r].value+'" data-scale_type="'+t[r].scale_type+'" data-parent_id="'+t[r].parent_id+'" data-is_child="'+t[r].is_child+'" data-id="'+t[r].id+'" '+(t[r].is_child==1?'data-appended="false"':'data-rating=""')+" >";if(t[r].is_child==1){$tree+='<i class="fa fa-check text-success"></i>';$tree+='<a class="btn">'+t[r].value+"</a>"}$tree+=e.fn.buildTreeRecur(t,t[r]["id"]);if(t[r].is_child==0||t[r].is_child==2){$tree+='<div class="checkbox text-info text-sm">';$tree+="<label>";$tree+='<input type="checkbox" class="skillcheck" name="skills[]" id="skillcheck-'+t[r].id+'" data-id="'+t[r].id+'"';if(t[r].rating!=""){$tree+=' checked="true"'}$tree+=">";$tree+=t[r].value;$tree+="</label>";$tree+='<div class="rating-f">';$tree+='<select class="skillselect"  name="skills-rating[]" id="skillselect-'+t[r].id+'" data-id="'+t[r].id+'">';$tree+=e.fn.skillScale(t[r].scale_type,t[r].rating);$tree+="</select>";$tree+="</div>";$tree+="</div>"}$tree+="</li>"}}$tree+="</ul>";return $tree};e.fn.buildTree=function(t,n){$tree="";e.each(n,function(t,n){if(!e("li#"+n.id).length){$tree+='<li id="'+n.id+'" data-value="'+n.value+'" data-scale_type="'+n.scale_type+'" data-parent_id="'+n.parent_id+'" data-is_child="'+n.is_child+'" data-id="'+n.id+'"  data-rating="" data-appended="false">';if(n.is_child==1){$tree+='<i class="fa fa-plus text-success"></i>';$tree+='<a class="btn">'+n.value+"</a>"}if(n.is_child==0||n.is_child==2){$tree+='<div class="checkbox text-info text-sm">';$tree+="<label>";$tree+='<input type="checkbox" class="skillcheck" name="skills[]" id="skillcheck-'+n.id+'" data-id="'+n.id+'">'+n.value;$tree+="</label>";$tree+='<div class="rating-f">';$tree+='<select class="skillselect"  name="skills-rating[]" id="skillselect-'+n.id+'" data-id="'+n.id+'">';$tree+=e.fn.skillScale(n.scale_type);$tree+="</select>";$tree+="</div>";$tree+="</div>"}$tree+="</li>"}});e(t.selector).attr("data-appended","true");if(e(t.selector).has("ul").length){e(t.selector+" > ul").append($tree)}else{e(t.selector).append("<ul>"+$tree+"</ul>")}};e.fn.skillScale=function(t,n){var r=[{id:"1",scale:"Novice:Competent:Proficient:Expert:Master",is_active:"1",create_at:"2014-01-25 11:40:19"},{id:"2",scale:"0 - 2 yrs exp:2 - 5 yrs exp:5 - 10 yrs exp:10 - 20 yrs exp: 20 plus yrs exp",is_active:"0",create_at:"2014-01-26 04:22:49"},{id:"4",scale:"Fair:Good:Very Good:Excellent:Outstanding",is_active:"1",create_at:"2014-01-27 10:45:22"},{id:"5",scale:"1 - 5:6 - 10:11 - 50:51 - 200:&gt;200",is_active:"1",create_at:"2014-01-28 04:28:17"},{id:"6",scale:"Low:Medium:High:Very High:Extreme",is_active:"1",create_at:"2014-01-28 04:28:56"},{id:"7",scale:"&lt;10:10 - 50:50 - 100:100 - 200:&gt;200",is_active:"1",create_at:"2014-01-28 04:30:31"},{id:"8",scale:"&lt; 1 Mn:1 - 2 Mn:2 - 5 Mn:5 - 10 Mn:&gt; 10 Mn",is_active:"1",create_at:"2014-01-28 04:31:26"},{id:"9",scale:"Experience in compliance:Experience in making improvements:Experience in driving implementation:Experience in making changes:Experience in conceptualising and strategising",is_active:"1",create_at:"2014-04-14 11:14:17"},{id:"10",scale:"Mostly compliance:Made improvements:Led small scale implementation:Led large scale implementation:Conceptualised / Strategised",is_active:"1",create_at:"2014-04-14 11:26:27"},{id:"11",scale:"Compliance:Improvement:Implementation Team:Implementation Head:Strategy",is_active:"1",create_at:"2014-04-14 11:31:23"},{id:"12",scale:"Operational Level:Junior Mgmt:Middle Mgmt:Senior Mgmt:CXO Level",is_active:"1",create_at:"2014-04-14 11:42:24"},{id:"13",scale:"Making Improvements:Adding Features:Involved in NPD:Driving NPD:Strategy for NPD",is_active:"1",create_at:"2014-04-14 11:47:21"},{id:"14",scale:"&lt; 1 Month:1-3 Months:3-12 Months:1-2 Years:&gt;2 Years",is_active:"1",create_at:"2014-04-14 11:58:06"},{id:"15",scale:"Level 1:Level 2:Level 3:Level 4:Level 5",is_active:"1",create_at:"2014-07-14 10:57:21"}];scale_split=r[t].scale.split(":");var i='<option value=""></option>';e.each(scale_split,function(e,t){if(n==e){i+='<option value="'+e+'" selected="selected">'+t+"</option>"}else{i+='<option value="'+e+'">'+t+"</option>"}});return i};e.fn.skillJson=function(){$skilljson=[];e.each(e('input[name="skills[]"]:checkbox:checked').parents("li"),function(t,n){$skilljson.push(e(n).data())});return JSON.stringify($skilljson.reverse())};e.fn.skillRating=function(){e(document).on("ajaxComplete load ready",function(){e(".skillcheck").on("click",function(){e(this).prop("checked",false);e("#skillselect-"+e(this).data("id")).barrating("clear")});e(".skillselect").barrating("show",{onSelect:function(t,n){var r=e(this).parent().siblings("select.skillselect").data("id");e("li#"+r).data("rating",t);e("#skillcheck-"+r).prop("checked",true)}})})};e.fn.alterClass=function(t,n){var r=this;if(t.indexOf("*")===-1){r.removeClass(t);return!n?r:r.addClass(n)}var i=new RegExp("\\s"+t.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g");r.each(function(t,n){var r=" "+n.className+" ";while(i.test(r)){r=r.replace(i," ")}n.className=e.trim(r)});return!n?r:r.addClass(n)};e.belowthefold=function(t,n){var r=e(window).height()+e(window).scrollTop();return r<=e(t).offset().top-n.threshold};e.abovethetop=function(t,n){var r=e(window).scrollTop();return r>=e(t).offset().top+e(t).height()-n.threshold};e.rightofscreen=function(t,n){var r=e(window).width()+e(window).scrollLeft();return r<=e(t).offset().left-n.threshold};e.leftofscreen=function(t,n){var r=e(window).scrollLeft();return r>=e(t).offset().left+e(t).width()-n.threshold};e.inviewport=function(t,n){return!e.rightofscreen(t,n)&&!e.leftofscreen(t,n)&&!e.belowthefold(t,n)&&!e.abovethetop(t,n)};e.extend(e.expr[":"],{"below-the-fold":function(t,n,r){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t,n,r){return e.abovethetop(t,{threshold:0})},"left-of-screen":function(t,n,r){return e.leftofscreen(t,{threshold:0})},"right-of-screen":function(t,n,r){return e.rightofscreen(t,{threshold:0})},"in-viewport":function(t,n,r){return e.inviewport(t,{threshold:0})}});var t,n,r;n=typeof window!=="undefined"&&window!==null?window:global;r="ontouchstart"in n;n.BarRating=t=function(){function t(){this.show=function(){var t=e(this.elem),n,i,s=this.options,o,u,a=r?"touchstart":"click";if(!t.data("barrating")){if(s.initialRating){u=e('option[value="'+s.initialRating+'"]',t)}else{u=e("option:selected",t)}t.data("barrating",{currentRatingValue:u.val(),currentRatingText:u.text(),originalRatingValue:u.val(),originalRatingText:u.text()});n=e("<div />",{"class":"br-widget"}).insertAfter(t);t.find("option").each(function(){var t,r,i,o;t=e(this).val();if(t){r=e(this).text();i=e("<a />",{href:"#","data-rating-value":t,"data-rating-text":r});o=e("<span />",{text:s.showValues?r:""});n.append(i.append(o))}});if(s.showSelectedRating){n.append(e("<div />",{text:"","class":"br-current-rating"}))}t.data("barrating").deselectable=!t.find("option:first").val()?true:false;if(s.reverse){o="nextAll"}else{o="prevAll"}if(s.reverse){n.addClass("br-reverse")}if(s.readonly){n.addClass("br-readonly")}n.on("ratingchange",function(n,r,i){var o=null;r=r?r:t.data("barrating").currentRatingValue;i=i?i:t.data("barrating").currentRatingText;o=t.find('option[value="'+r+'"]');o.prop("selected",true);if(s.showSelectedRating){e(this).find(".br-current-rating").text(i)}}).trigger("ratingchange");n.on("updaterating",function(n){e(this).find('a[data-rating-value="'+t.data("barrating").currentRatingValue+'"]').addClass("br-selected br-current")[o]().addClass("br-selected")}).trigger("updaterating");i=n.find("a");if(r||s.readonly){i.on("click",function(e){e.preventDefault()})}if(!s.readonly){i.on(a,function(r){var u=e(this),a,f;r.preventDefault();i.removeClass("br-active br-selected");u.addClass("br-selected")[o]().addClass("br-selected");a=u.attr("data-rating-value");f=u.attr("data-rating-text");if(u.hasClass("br-current")&&t.data("barrating").deselectable){u.removeClass("br-selected br-current")[o]().removeClass("br-selected br-current");a="",f="";if(!e.isEmptyObject(u.parent().prev("label")))u.parent().prev("label").show()}else{i.removeClass("br-current");u.addClass("br-current");if(!e.isEmptyObject(u.parent().prev("label")))u.parent().prev("label").hide()}t.data("barrating").currentRatingValue=a;t.data("barrating").currentRatingText=f;n.trigger("ratingchange");if(e("#jobapplyform").length){e("#jobapplyform").bootstrapValidator("revalidateField",t.attr("name"))}s.onSelect.call(this,t.data("barrating").currentRatingValue,t.data("barrating").currentRatingText);return false});if(!r){i.on({mouseenter:function(){var t=e(this);i.removeClass("br-active").removeClass("br-selected");t.addClass("br-active")[o]().addClass("br-active");n.trigger("ratingchange",[t.attr("data-rating-value"),t.attr("data-rating-text")])}});n.on({mouseleave:function(){i.removeClass("br-active");n.trigger("ratingchange").trigger("updaterating")}})}}t.hide()}};this.clear=function(){var t=e(this.elem);var n=t.next(".br-widget");if(n&&t.data("barrating")){n.find("a").removeClass("br-selected br-current");t.data("barrating").currentRatingValue=t.data("barrating").originalRatingValue;t.data("barrating").currentRatingText=t.data("barrating").originalRatingText;n.trigger("ratingchange").trigger("updaterating");this.options.onClear.call(this,t.data("barrating").currentRatingValue,t.data("barrating").currentRatingText)}};this.destroy=function(){var t=e(this.elem);var n=t.next(".br-widget");if(n&&t.data("barrating")){var r=t.data("barrating").currentRatingValue;var i=t.data("barrating").currentRatingText;t.removeData("barrating");n.off().remove();t.show();this.options.onDestroy.call(this,r,i)}}}t.prototype.init=function(t,n){var r;r=this;r.elem=n;return r.options=e.extend({},e.fn.barrating.defaults,t)};return t}();e.fn.barrating=function(n,r){return this.each(function(){var i=new t;if(!e(this).is("select")){e.error("Sorry, this plugin only works with select fields.")}if(i.hasOwnProperty(n)){i.init(r,this);return i[n]()}else if(typeof n==="object"||!n){r=n;i.init(r,this);return i.show()}else{e.error("Method "+n+" does not exist on jQuery.barrating")}})};return e.fn.barrating.defaults={initialRating:null,showValues:false,showSelectedRating:true,reverse:false,readonly:false,onSelect:function(e,t){},onClear:function(e,t){},onDestroy:function(e,t){}}})(e);e(function(){e('*[data-href="http://api.itsyourskills.com/widgets"]').skillEngine({getSkillJson:function(e){console.log(e)}});e("input[name=submit]").on("click",function(){e.fn.skillJson()})})}var e;if(window.jQuery===undefined||window.jQuery.fn.jquery!=="2.1.3"){var t=document.createElement("script");t.setAttribute("type","text/javascript");t.setAttribute("src","http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js");if(t.readyState){t.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){n()}}}else{t.onload=n}(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(t)}else{e=window.jQuery;r(e)}})()
